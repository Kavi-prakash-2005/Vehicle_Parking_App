<!DOCTYPE html>
<html>
<head>
    <title>Search Parking Lots</title>
</head>
<body>
    <h2>Search Parking Lots by Location or Pin Code</h2>

    <form method="POST">
        <input type="text" name="search" required>
        <button type="submit">Search</button>
    </form>

    {% if lots %}
    <h3>Results:</h3>
    <table border="1" cellpadding="8">
        <tr>
            <th>ID</th>
            <th>Address</th>
            <th>Availability</th>
            <th>Action</th>
        </tr>
        {% for lot in lots %}
        <tr>
            <td>{{ lot.id }}</td>
            <td>{{ lot.address }}</td>
            <td>
                {{
                    lot.maximum_number_of_spots
                    - lot.spots|selectattr("status", "equalto", "R")|list|length
                }}
            </td>
            <td><a href="/user/book/{{ lot.id }}">Book</a></td>
        </tr>
        {% endfor %}
    </table>
    {% endif %}

    <br><a href="/user/dashboard">‚Üê Back to Dashboard</a>
</body>
</html>
